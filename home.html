<!DOCTYPE html>
<html>

<head>
  <style>
    .title {
      background-color: rgb(0, 222, 11);
      color: rgb(0, 0, 0);
      border: 2px solid black;
      margin: 20px;
      padding: 20px;
    }
  </style>
</head>


<script>
  function search() {
    title = document.getElementById("title");
    results = document.getElementById("resultsText");
    results.innerText = title.value;
    title.value = "";
    results.style.display = "block";
  }

  function enterSearch(event) {
    if (event.keyCode === 13) {
      title = document.getElementById("title");
      results = document.getElementById("resultsText");
      results.innerText = title.value;
      title.value = "";
      results.style.display = "block";
    }
  }

  //testing code
  function apiAccessTest(event) {

    // fetch("https://api.flixed.io/v1/streaming-providers/10008?region=US&apiKey=8MqjZtMPW1LUUEydpqjzULeQ6EmBfbEg", {
    // https://api.flixed.io/v1/movies/" + id + "?idType=imdb&apiKey=8MqjZtMPW1LUUEydpqjzULeQ6EmBfbEg
    // https://api.flixed.io/v1/movies/0208092?idType=imdb&apiKey=8MqjZtMPW1LUUEydpqjzULeQ6EmBfbEg
    //   method: 'GET',
    //   headers: {
    //     accept: 'application/json',
    //   },
    // })




    // fetch("http://www.omdbapi.com/?t=In+Bruges&apikey=53dcb6b7", {
    //   method: 'GET',
    //   headers: {
    //     accept: 'application/json',
    //   },
    // })
    // .then(response => response.json())
    // .then((titleData) => {
    //  id = titleData.imdbID;
    //   while (id.charAt(0) === 't') {
    //       id = id.substring(1);
    //   }
    //   fetch("https://api.flixed.io/v1/streaming-providers/10008?region=US&apiKey=8MqjZtMPW1LUUEydpqjzULeQ6EmBfbEg", {
    //     method: 'GET',
    //       headers: {
    //         accept: 'application/json',
    //       },
    //     })
    //       .then(flixedRes => {
    //         flixedRes.json()
    //       })
    //       .then((data) => {
    //         results = document.getElementById("resultsText");
    //         results.innerText = data.watchAvailability.directUrls[0];
    //         results.style.display = "block";
    //       })
    //       .catch((error) => {
    //         results = document.getElementById("resultsText");
    //         results.innerText = error.message;
    //         results.style.display = "block";
    //       });
    //   })
    //   .catch((error) => {
    //     results = document.getElementById("resultsText");
    //     results.innerText = error.message;
    //     results.style.display = "block";
    //   });


    fetch("https://api.flixed.io/v1/movies/0208092?idType=imdb&apiKey=8MqjZtMPW1LUUEydpqjzULeQ6EmBfbEg", {
      method: 'GET',
    })
      .then(response => {
        return response.json();
      })
      .then((data) => {
        results = document.getElementById("resultsText");
        results.innerText = data;
        results.style.display = "block";
      })
      .catch((error) => {
        results = document.getElementById("resultsText");
        results.innerText = error.message;
        results.style.display = "block";
      });
  }

</script>

<body>

  <div id="Header" class="title">
    <h2>Hulist</h2>
    <p>name is a work in progress</p>
  </div>

  <div>
    <input id="title" type="text" onkeypress="enterSearch(event)" placeholder="Search TV Show Name...">
    <button id="searchButton" type="button" onclick="search()">Search</button>
    <!--testing code-->
    <button id="apiTest" type="button" onclick="apiAccessTest()">Test API</button>
  </div>

  <p id="resultsText" style='display: none'>Test</p>

</body>

</html>